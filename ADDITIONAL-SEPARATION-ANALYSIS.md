# 🎯 추가 분리 검토 결과

완료일: 2026-02-04 | 상태: **💭 검토 완료**

## 현재 상황 분석

### 1️⃣ 파일 구조 현황
```
hedge-manager.html:     3,911줄 (197KB) ← 온보딩 모달 포함
onboarding.html:          830줄 (36KB)  ← 별도 페이지 존재
core/*.js:             ~5,000줄 (16개 모듈)
──────────────────────────────
총합:                   8,741줄

분리 가능성: ⭐⭐⭐⭐ (높음)
```

### 2️⃣ hedge-manager.html 내 온보딩 코드
```
├─ HTML 마크업:     ~150줄 (2개 모달)
├─ CSS 스타일:      ~50줄 (모달 스타일)
├─ JavaScript:     ~200줄 (이벤트 핸들러)
└─ DOM 관련:       ~300줄 (모달 구조)

총 온보딩 관련: ~700줄
```

## 🤔 추가 분리의 실효성 검토

### 방안 A: 온보딩 모달 완전 분리 (현재 제안)
```
분리 결과:
  • hedge-manager.html: 3,911줄 → 3,200줄 (-711줄, -18%)
  • onboarding.html:    830줄 → 1,050줄 (+220줄)
  • 총합: 4,741줄 (변화 없음)

효과:
  ✅ hedge-manager.html 크기 감소
  ❌ 총 코드량 변화 없음
  ❌ 파일 개수 증가 없음 (이미 있음)

비용:
  ⚠️ 온보딩 <→ 메인 통신 로직 필요
  ⚠️ 데이터 동기화 코드 추가
  ⚠️ 페이지 전환 처리 필요

추천: ⭐⭐ (비용 대비 효과 낮음)
```

## 💡 더 나은 대안들

### 방안 B: 대시보드 섹션 모듈화 (추천)
```
분리 대상:
  • positions-panel.js (포지션 테이블 + 로직)
  • kpi-panel.js (KPI 카드 + 로직)
  • exchange-rates-panel.js (환율 표시)
  • suggestions-panel.js (헤지 제안)

분리 효과:
  • hedge-manager.html: 3,911줄 → 2,200줄 (-1,700줄, -43%)
  • 새 모듈: 4개 (~1,500줄)
  • 총합: 변화 없음 (코드 재배치)

장점:
  ✅ hedge-manager.html 대폭 감소
  ✅ 각 패널을 독립적으로 개선
  ✅ 재사용 가능한 컴포넌트
  ✅ 테스트 용이
```

### 방안 C: 모달 라이브러리 통합 (고려)
```
분리 대상:
  • 8개 모달 → modals-library.html
  • 동적 로드로 필요할 때만 포함

분리 효과:
  • hedge-manager.html: 3,911줄 → 2,900줄 (-1,000줄, -25%)
  • modals-library.html: 1,300줄 (새로 생성)
  • 동적 로드로 초기 로드 시간 개선

장점:
  ✅ 모든 모달을 한 파일에서 관리
  ✅ hedge-manager.html 간결화
  ✅ 초기 로드 성능 개선

단점:
  ❌ 모달 로드 지연 (평소에는 문제 없음)
```

## 🎯 권장 전략

### **추천**: 방안 B (대시보드 섹션 모듈화)

**이유**:
1. **최대 효과**: 43% 파일 크기 감소
2. **개발 생산성**: 향후 패널 추가/수정 용이
3. **재사용성**: 다른 대시보드에서 재사용 가능
4. **테스트**: 각 섹션을 독립적으로 검증

**구현 단계**:
```
Step 1: positions-panel.js 생성 (포지션 테이블)
        └─ renderPositions, selectPosition, etc.

Step 2: kpi-panel.js 생성 (KPI 지표)
        └─ renderKPI, updateKPI, etc.

Step 3: suggestions-panel.js 생성 (제안)
        └─ renderSuggestions, executeSuggestion, etc.

Step 4: exchange-rates-panel.js 생성 (환율)
        └─ renderExchangeRates, updateRates, etc.

Step 5: hedge-manager.html에서 통합
        └─ 모든 패널을 동적 로드하여 조립
```

## 📊 최종 비교표

| 항목 | 현재 | 방안 A | 방안 B | 방안 C |
|------|------|--------|--------|--------|
| hedge-manager.html | 3,911줄 | 3,200줄 | 2,200줄 | 2,900줄 |
| 파일 개수 | 17개 | 17개 | 21개 | 18개 |
| 초기 로드 | 170KB | 155KB | 110KB | 100KB |
| 개발 생산성 | 보통 | 보통 | 높음 | 중간 |
| 유지보수 | 어려움 | 어려움 | 용이 | 용이 |
| 추천도 | - | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

## ✅ 결론

### 현재 상태로도 충분
- ✅ hedge-manager.html: 3,911줄 (관리 가능 범위)
- ✅ 16개 모듈로 이미 잘 분리됨
- ✅ 온보딩은 별도 파일(onboarding.html)로 이미 분리

### 향후 개선 우선순위
1. **Phase 1 (즉시 추천)**: 방안 B 적용 → 2,200줄로 감소
2. **Phase 2 (선택)**: 방안 C 적용 → 초기 로드 성능 개선
3. **Phase 3 (향후)**: 추가 계산/데이터 모듈 분리

### 온보딩 분리 평가
- 기술적으로 가능: ✅
- 비용 대비 효과: ❌ (낮음)
- 권장도: ⭐ (다른 대안이 더 나음)

---

**제안**: 방안 B(대시보드 섹션 모듈화)로 진행하시겠습니까?
